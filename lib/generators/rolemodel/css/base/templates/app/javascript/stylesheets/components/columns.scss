.columns {
  @media screen and (min-width: $breakpoint-sm) {
    display: flex;
  }

  margin-left: calc(-1 * var(--space-sm));
  margin-right: calc(-1 * var(--space-sm));
  margin-top: calc(-1 * var(--space-sm));

  &:not(:last-child) {
    margin-bottom: calc(var(--space-lg) - var(--space-sm));
  }

  &.is-mobile {
    display: flex;
  }

  &.is-gapless {
    margin-left: 0;
    margin-right: 0;
    margin-top: 0;

    &>.column {
      margin: 0;
      padding: 0!important;
    }
  }

  &.is-multiline {
    flex-wrap: wrap;
  }


  &.is-variable {
    --columnGap: var(--space-sm);
    margin-left: calc(-1 * var(--columnGap));
    margin-right: calc(-1 * var(--columnGap));

    &.is-0 { --columnGap: 0rem; }
    &.is-1 { --columnGap: var(--space-xxs); }
    &.is-2 { --columnGap: var(--space-xs); }
    &.is-3 { --columnGap: var(--space-sm); }
    &.is-4 { --columnGap: var(--space-md); }
    &.is-5 { --columnGap: var(--space-lg); }
    &.is-6 { --columnGap: var(--space-xl); }

    &>.column {
      padding-left: var(--columnGap);
      padding-right: var(--columnGap);
    }
  }
}

.column {
  display: block;
  flex-basis: 0;
  flex-grow: 1;
  flex-shrink: 1;
  padding: var(--space-sm);

  //  Sizing

  &.is-full {
    flex: none;
    width: 100%;
  }

  &.is-half {
    flex: none;
    width: calc(100% * 1/2);
  }

  &.is-offset-one-half {
    margin-left: calc(100% * 1/2);
  }

  @function pluralize($string, $number) {
    @if $number == "1" {
      @return $string;
    } @else {
      @return "#{$string}s";
    }
  }

  // Fifths Sizing and Offset
  $numbers: ("four": "4", "three": "3", "two": "2", "one": "1");
  @each $name, $number in $numbers {
    &.is-#{$name}-#{pluralize("fifth", $number)} {
      flex: none;
      width: calc(100% * #{$number}/5);
    }

    &.is-offset-#{$name}-#{pluralize("fifth", $number)} {
      margin-left: calc(100% * #{$number}/5);
    }
  }

  // Quarters Sizing and Offset
  $numbers: ("three": "3", "one": "1");
  @each $name, $number in $numbers {
    &.is-#{$name}-#{pluralize("quarter", $number)} {
      flex: none;
      width: calc(100% * #{$number}/4);
    }

    &.is-offset-#{$name}-#{pluralize("quarter", $number)} {
      margin-left: calc(100% * #{$number}/4);
    }
  }

  // Thirds Sizing and Offset
  $numbers: ("two": "2", "one": "1");
  @each $name, $number in $numbers {
    &.is-#{$name}-#{pluralize("third", $number)} {
      flex: none;
      width: calc(100% * #{$number}/3);
    }

    &.is-offset-#{$name}-#{pluralize("third", $number)} {
      margin-left: calc(100% * #{$number}/3);
    }
  }

  // 12 columns system with offsets
  @for $counter from 1 through 12 {
    &.is-#{$counter} {
      flex: none;
      width: calc(100% / 12 * #{$counter});
    }

    @if $counter != 12 {
      &.is-offset-#{$counter} {
        margin-left: calc(100% / 12 * #{$counter});
      }
    }
  }
}
